# 网球小程序部署和用户测试指南

## 🚀 部署步骤

### 1. 前端部署（微信小程序）

#### 1.1 开发环境准备
```bash
# 确保已安装微信开发者工具
# 下载地址：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

# 检查项目结构
frontend/
├── pages/
│   ├── match/          # 主比赛页面（新的分离式布局）
│   ├── detail/         # 比赛详情页面（状态管理）
│   └── user/           # 用户页面
├── components/
│   ├── match-status/   # 状态管理组件
│   └── score-detail/   # 比分详情组件
└── utils/
    └── api.js          # API管理
```

#### 1.2 配置小程序信息
1. 打开 `frontend/app.json`，确认页面路径正确：
```json
{
  "pages": [
    "pages/match/match",
    "pages/detail/detail", 
    "pages/user/user"
  ]
}
```

2. 检查 `frontend/project.config.json`：
```json
{
  "appid": "你的小程序AppID",
  "projectname": "tennis-wxapp",
  "setting": {
    "es6": true,
    "enhance": true,
    "postcss": true,
    "minified": true
  }
}
```

#### 1.3 部署到微信开发者工具
1. 打开微信开发者工具
2. 选择"导入项目"
3. 项目目录选择 `frontend` 文件夹
4. 输入小程序AppID
5. 点击"导入"

### 2. 后端部署（Node.js服务）

#### 2.1 环境准备
```bash
# 进入后端目录
cd backend

# 安装依赖
npm install

# 配置环境变量
cp .env.example .env
```

#### 2.2 配置数据库
```bash
# 启动MongoDB（如果使用本地数据库）
mongod --dbpath /path/to/your/db

# 或配置云数据库连接
# 在 .env 文件中设置：
MONGODB_URI=mongodb://localhost:27017/tennis-app
```

#### 2.3 启动服务
```bash
# 开发环境
npm run dev

# 生产环境
npm start
```

### 3. 配置API连接

#### 3.1 更新API基础URL
在 `frontend/utils/api.js` 中更新：
```javascript
const BASE_URL = 'https://your-backend-domain.com/api'; // 生产环境
// const BASE_URL = 'http://localhost:3000/api'; // 开发环境
```

#### 3.2 配置小程序域名白名单
在微信公众平台 > 开发 > 开发设置 > 服务器域名中添加：
- request合法域名：`https://your-backend-domain.com`
- socket合法域名：`wss://your-backend-domain.com`

## 🧪 用户测试步骤

### 测试阶段1：基础功能验证

#### 1.1 页面导航测试
**测试目标**：验证页面间导航正常
**测试步骤**：
1. 打开小程序
2. 检查底部导航栏是否显示正常
3. 点击"比赛"、"详情"、"我的"等标签
4. 验证页面切换是否流畅

**预期结果**：
- ✅ 所有页面正常加载
- ✅ 导航切换无卡顿
- ✅ 页面布局显示正确

#### 1.2 新布局显示测试
**测试目标**：验证分离式布局正确显示
**测试步骤**：
1. 进入"比赛"页面
2. 观察页面布局是否为左右分离结构
3. 检查左侧"比赛数据"区域
4. 检查右侧"火热报名"区域

**预期结果**：
- ✅ 左侧显示比赛数据标签页
- ✅ 右侧显示报名入口卡片
- ✅ 布局在不同设备上适配良好

### 测试阶段2：比赛数据功能

#### 2.1 比赛状态切换测试
**测试目标**：验证比赛状态标签页切换
**测试步骤**：
1. 在比赛页面左侧，点击"已比赛/进行中"标签
2. 观察显示的比赛列表
3. 点击"未来比赛"标签
4. 观察内容是否正确切换

**预期结果**：
- ✅ 标签页切换正常
- ✅ 不同状态的比赛正确分类显示
- ✅ 进行中比赛显示LIVE指示器

#### 2.2 比赛卡片交互测试
**测试目标**：验证比赛卡片点击和显示
**测试步骤**：
1. 点击任意比赛卡片
2. 验证是否跳转到比赛详情页
3. 检查详情页信息是否完整
4. 返回比赛列表页面

**预期结果**：
- ✅ 卡片点击响应正常
- ✅ 详情页正确显示比赛信息
- ✅ 返回功能正常

### 测试阶段3：状态管理功能

#### 3.1 状态管理组件测试
**测试目标**：验证比赛状态管理功能
**测试步骤**：
1. 进入比赛详情页
2. 查看状态管理组件是否显示
3. 如果有权限，尝试更改比赛状态
4. 观察状态更新是否生效

**预期结果**：
- ✅ 状态组件正确显示当前状态
- ✅ 有权限用户可以更改状态
- ✅ 状态更新后界面及时刷新

#### 3.2 权限控制测试
**测试目标**：验证状态管理权限控制
**测试步骤**：
1. 使用不同角色用户登录
2. 检查状态管理按钮的显示/隐藏
3. 验证权限控制是否正确

**预期结果**：
- ✅ 主办方和参赛选手可以管理状态
- ✅ 普通用户只能查看状态
- ✅ 权限控制准确无误

### 测试阶段4：报名功能测试

#### 4.1 报名入口显示测试
**测试目标**：验证火热报名区域功能
**测试步骤**：
1. 在比赛页面右侧查看报名卡片
2. 检查报名信息是否完整
3. 观察报名状态标识
4. 点击"立即报名"按钮

**预期结果**：
- ✅ 报名卡片信息完整显示
- ✅ 状态标识正确（精选/热门/即将截止）
- ✅ 报名按钮响应正常

#### 4.2 报名流程测试
**测试目标**：验证完整报名流程
**测试步骤**：
1. 点击报名卡片
2. 进入赛事详情页面
3. 填写报名信息
4. 提交报名申请

**预期结果**：
- ✅ 报名流程顺畅
- ✅ 表单验证正确
- ✅ 提交成功有反馈

### 测试阶段5：性能和体验测试

#### 5.1 加载性能测试
**测试目标**：验证页面加载性能
**测试步骤**：
1. 清除小程序缓存
2. 重新打开小程序
3. 记录各页面加载时间
4. 测试大量数据时的响应速度

**预期结果**：
- ✅ 首页加载时间 < 3秒
- ✅ 页面切换响应 < 1秒
- ✅ 大数据量时无明显卡顿

#### 5.2 交互体验测试
**测试目标**：验证用户交互体验
**测试步骤**：
1. 测试下拉刷新功能
2. 测试上拉加载更多
3. 测试筛选和搜索功能
4. 测试各种手势操作

**预期结果**：
- ✅ 下拉刷新正常工作
- ✅ 分页加载无问题
- ✅ 筛选搜索响应及时
- ✅ 手势操作流畅

## 📱 测试设备和环境

### 推荐测试设备
1. **iPhone**：iPhone 12/13/14 (iOS 14+)
2. **Android**：华为/小米/OPPO主流机型
3. **微信版本**：8.0.0+

### 测试环境
1. **网络环境**：WiFi、4G、5G
2. **系统版本**：iOS 14+、Android 8+
3. **微信版本**：最新稳定版

## 🐛 常见问题排查

### 问题1：页面显示异常
**可能原因**：
- 组件注册错误
- 样式文件缺失
- API接口异常

**排查步骤**：
1. 检查控制台错误信息
2. 验证组件路径是否正确
3. 测试API接口是否可访问

### 问题2：状态管理不工作
**可能原因**：
- 权限验证失败
- WebSocket连接异常
- 数据同步问题

**排查步骤**：
1. 检查用户登录状态
2. 验证WebSocket连接
3. 查看网络请求日志

### 问题3：性能问题
**可能原因**：
- 数据量过大
- 内存泄漏
- 网络请求过多

**排查步骤**：
1. 启用分页加载
2. 检查内存使用情况
3. 优化API请求频率

## 📊 测试报告模板

### 测试结果记录表
| 测试项目 | 测试结果 | 问题描述 | 优先级 |
|---------|---------|---------|--------|
| 页面导航 | ✅/❌ | | 高/中/低 |
| 布局显示 | ✅/❌ | | 高/中/低 |
| 状态管理 | ✅/❌ | | 高/中/低 |
| 报名功能 | ✅/❌ | | 高/中/低 |
| 性能表现 | ✅/❌ | | 高/中/低 |

### 用户反馈收集
1. **易用性评分**：1-10分
2. **功能完整性**：1-10分
3. **界面美观度**：1-10分
4. **响应速度**：1-10分
5. **整体满意度**：1-10分

## 🎯 验收标准

### 功能验收
- ✅ 所有核心功能正常工作
- ✅ 用户权限控制准确
- ✅ 数据显示完整正确
- ✅ 交互响应及时

### 性能验收
- ✅ 页面加载时间 < 3秒
- ✅ 操作响应时间 < 1秒
- ✅ 内存使用合理
- ✅ 网络请求优化

### 体验验收
- ✅ 界面美观现代
- ✅ 操作流程顺畅
- ✅ 错误处理友好
- ✅ 用户反馈积极

完成以上测试步骤后，您的网球小程序就可以正式发布使用了！
