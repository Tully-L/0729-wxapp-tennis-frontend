<!-- 页面最外层容器 -->
<view class="page-container">
  <!-- 顶部导航栏（微信原生导航栏已设置标题为"LJ网球社"） -->

  <!-- 顶部横幅区域 -->
  <view class="banner">
    <view class="banner-bg"></view> <!-- 深绿色背景块 -->
    <image class="tennis-banner-image" src="/images/icon/tennis0.png" mode="aspectFill"></image>
    <view class="banner-content">
      <text class="club-title">LJ网球社</text>
      <text class="slogan">热爱网球 · 享受运动</text>
    </view>
  </view>

  <!-- 功能导航区域 -->
  <view class="func-nav">
    <view class="nav-item" bindtap="goToLeagueIntro">
      <view class="nav-icon"></view> <!-- 功能图标色块 -->
      <text class="nav-text">联盟介绍</text>
    </view>
    <view class="nav-item" bindtap="goToBrandEvents">
      <view class="nav-icon"></view>
      <text class="nav-text">品牌赛事</text>
    </view>
    <view class="nav-item" bindtap="goToPlayerRanking">
      <view class="nav-icon"></view>
      <text class="nav-text">球员排名</text>
    </view>
    <view class="nav-item" bindtap="goToPointsRanking">
      <view class="nav-icon"></view>
      <text class="nav-text">积分榜</text>
    </view>
  </view>

  <!-- 通知栏区域 -->
  <view class="notice-bar">
    <view class="notice-icon"></view> <!-- 通知图标色块 -->
    <text class="notice-text">本周六下午2点将举行月度积分赛，请各位成员踊跃报名！</text>
    <view class="close-icon" bindtap="closeNotice"></view> <!-- 关闭按钮色块 -->
  </view>

  <!-- 赛事列表标题及筛选区域 -->
  <view class="event-list-header">
    <view class="title-icon"></view> <!-- 标题图标色块 -->
    <text class="list-title">近期赛事</text>
    <view class="search-icon" bindtap="toggleSearch"></view> <!-- 搜索图标色块 -->
    <view class="filter-icon" bindtap="toggleFilter"></view> <!-- 筛选图标色块 -->
  </view>
  <!-- 赛事卡片列表区域 -->
  <view class="event-cards">
    <!-- 动态赛事卡片 -->
    <block wx:if="{{events.length > 0}}">
      <view wx:for="{{events}}" wx:for-item="event" wx:key="_id" class="event-card" bindtap="goToEventDetail" data-id="{{event._id}}">
        <view class="card-img"></view>
        <view class="card-info">
          <text class="card-title">{{event.title || event.name}}</text>
          <view class="tags">
            <text class="tag">{{event.eventTypeText}}</text>
            <text class="tag">{{(event.ext_info && event.ext_info.maxParticipants) || event.maxParticipants || 20}}人</text>
            <text class="tag">{{event.currentParticipants || 0}}/{{(event.ext_info && event.ext_info.maxParticipants) || event.maxParticipants || 20}}</text>
          </view>
          <view class="status">
            <text class="status-tag">{{event.status === 'published' ? '报名中' : event.status === 'ongoing' ? '进行中' : event.status === 'ended' ? '已结束' : '报名中'}}</text>
            <text class="time">{{event.start_time}}</text>
          </view>
        </view>
      </view>
    </block>
    
    <!-- 空状态 -->
    <view wx:if="{{!loading && events.length === 0}}" class="empty-state">
      <text class="empty-icon">📭</text>
      <view class="empty-text">暂无赛事数据</view>
    </view>
    
    <!-- 加载状态 -->
    <view wx:if="{{loading}}" class="loading-state">
      <view class="loading-spinner"></view>
      <view class="loading-text">加载中...</view>
    </view>
  </view>


  <!-- 搜索面板（隐藏状态） -->
  <view class="search-panel {{showSearch ? 'show' : ''}}" wx:if="{{showSearch}}">
    <view class="search-content">
      <input class="search-input" placeholder="搜索赛事..." value="{{searchQuery}}" bindinput="onSearchInput" />
      <button class="search-btn" bindtap="onSearch">搜索</button>
    </view>
  </view>

  <!-- 筛选面板（隐藏状态） -->
  <view class="filter-panel {{showFilter ? 'show' : ''}}" wx:if="{{showFilter}}">
    <view class="filter-content">
      <view class="filter-title">筛选条件</view>
      <view class="filter-options">
        <view class="filter-option" bindtap="filterByType" data-type="all">全部</view>
        <view class="filter-option" bindtap="filterByType" data-type="single">单打</view>
        <view class="filter-option" bindtap="filterByType" data-type="double">双打</view>
      </view>
      <button class="filter-confirm" bindtap="confirmFilter">确定</button>
    </view>
  </view>
</view>