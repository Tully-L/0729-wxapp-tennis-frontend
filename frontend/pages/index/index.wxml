<!-- é¡µé¢æœ€å¤–å±‚å®¹å™¨ -->
<view class="page-container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ ï¼ˆå¾®ä¿¡åŸç”Ÿå¯¼èˆªæ å·²è®¾ç½®æ ‡é¢˜ä¸º"LJç½‘çƒç¤¾"ï¼‰ -->

  <!-- é¡¶éƒ¨æ¨ªå¹…åŒºåŸŸ -->
  <view class="banner">
    <view class="banner-bg"></view> <!-- æ·±ç»¿è‰²èƒŒæ™¯å— -->
    <image class="tennis-banner-image" src="/images/icon/tennis0.png" mode="aspectFill"></image>
    <view class="banner-content">
      <text class="club-title">LJç½‘çƒç¤¾</text>
      <text class="slogan">çƒ­çˆ±ç½‘çƒ Â· äº«å—è¿åŠ¨</text>
    </view>
  </view>

  <!-- åŠŸèƒ½å¯¼èˆªåŒºåŸŸ -->
  <view class="func-nav">
    <view class="nav-item" bindtap="goToLeagueIntro">
      <view class="nav-icon"></view> <!-- åŠŸèƒ½å›¾æ ‡è‰²å— -->
      <text class="nav-text">è”ç›Ÿä»‹ç»</text>
    </view>
    <view class="nav-item" bindtap="goToBrandEvents">
      <view class="nav-icon"></view>
      <text class="nav-text">å“ç‰Œèµ›äº‹</text>
    </view>
    <view class="nav-item" bindtap="goToPlayerRanking">
      <view class="nav-icon"></view>
      <text class="nav-text">çƒå‘˜æ’å</text>
    </view>
    <view class="nav-item" bindtap="goToPointsRanking">
      <view class="nav-icon"></view>
      <text class="nav-text">ç§¯åˆ†æ¦œ</text>
    </view>
  </view>

  <!-- é€šçŸ¥æ åŒºåŸŸ -->
  <view class="notice-bar">
    <view class="notice-icon"></view> <!-- é€šçŸ¥å›¾æ ‡è‰²å— -->
    <text class="notice-text">æœ¬å‘¨å…­ä¸‹åˆ2ç‚¹å°†ä¸¾è¡Œæœˆåº¦ç§¯åˆ†èµ›ï¼Œè¯·å„ä½æˆå‘˜è¸Šè·ƒæŠ¥åï¼</text>
    <view class="close-icon" bindtap="closeNotice"></view> <!-- å…³é—­æŒ‰é’®è‰²å— -->
  </view>

  <!-- èµ›äº‹åˆ—è¡¨æ ‡é¢˜åŠç­›é€‰åŒºåŸŸ -->
  <view class="event-list-header">
    <view class="title-icon"></view> <!-- æ ‡é¢˜å›¾æ ‡è‰²å— -->
    <text class="list-title">è¿‘æœŸèµ›äº‹</text>
    <view class="search-icon" bindtap="toggleSearch"></view> <!-- æœç´¢å›¾æ ‡è‰²å— -->
    <view class="filter-icon" bindtap="toggleFilter"></view> <!-- ç­›é€‰å›¾æ ‡è‰²å— -->
  </view>
  <!-- èµ›äº‹å¡ç‰‡åˆ—è¡¨åŒºåŸŸ -->
  <view class="event-cards">
    <!-- åŠ¨æ€èµ›äº‹å¡ç‰‡ -->
    <block wx:if="{{events.length > 0}}">
      <view wx:for="{{events}}" wx:for-item="event" wx:key="_id" class="event-card" bindtap="goToEventDetail" data-id="{{event._id}}">
        <view class="card-img"></view>
        <view class="card-info">
          <text class="card-title">{{event.title || event.name}}</text>
          <view class="tags">
            <text class="tag">{{event.eventTypeText}}</text>
            <text class="tag">{{(event.ext_info && event.ext_info.maxParticipants) || event.maxParticipants || 20}}äºº</text>
            <text class="tag">{{event.currentParticipants || 0}}/{{(event.ext_info && event.ext_info.maxParticipants) || event.maxParticipants || 20}}</text>
          </view>
          <view class="status">
            <text class="status-tag">{{event.status === 'published' ? 'æŠ¥åä¸­' : event.status === 'ongoing' ? 'è¿›è¡Œä¸­' : event.status === 'ended' ? 'å·²ç»“æŸ' : 'æŠ¥åä¸­'}}</text>
            <text class="time">{{event.start_time}}</text>
          </view>
        </view>
      </view>
    </block>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{!loading && events.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“­</text>
      <view class="empty-text">æš‚æ— èµ›äº‹æ•°æ®</view>
    </view>
    
    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading-state">
      <view class="loading-spinner"></view>
      <view class="loading-text">åŠ è½½ä¸­...</view>
    </view>
  </view>


  <!-- æœç´¢é¢æ¿ï¼ˆéšè—çŠ¶æ€ï¼‰ -->
  <view class="search-panel {{showSearch ? 'show' : ''}}" wx:if="{{showSearch}}">
    <view class="search-content">
      <input class="search-input" placeholder="æœç´¢èµ›äº‹..." value="{{searchQuery}}" bindinput="onSearchInput" />
      <button class="search-btn" bindtap="onSearch">æœç´¢</button>
    </view>
  </view>

  <!-- ç­›é€‰é¢æ¿ï¼ˆéšè—çŠ¶æ€ï¼‰ -->
  <view class="filter-panel {{showFilter ? 'show' : ''}}" wx:if="{{showFilter}}">
    <view class="filter-content">
      <view class="filter-title">ç­›é€‰æ¡ä»¶</view>
      <view class="filter-options">
        <view class="filter-option" bindtap="filterByType" data-type="all">å…¨éƒ¨</view>
        <view class="filter-option" bindtap="filterByType" data-type="single">å•æ‰“</view>
        <view class="filter-option" bindtap="filterByType" data-type="double">åŒæ‰“</view>
      </view>
      <button class="filter-confirm" bindtap="confirmFilter">ç¡®å®š</button>
    </view>
  </view>
</view>