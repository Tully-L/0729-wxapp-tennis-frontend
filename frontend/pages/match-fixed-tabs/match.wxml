<!-- Match Page with Fixed Tabs - æ¯”èµ›é¡µé¢ -->\n<view class=\"match-container\">\n  <!-- Fixed Tab Bar for Match Page -->\n  <fixed-tab-bar \n    tabs=\"{{matchTabs}}\"\n    activeTab=\"{{activeMatchTab}}\"\n    bindtabchange=\"onMatchTabChange\"\n    className=\"match-tab-bar\"\n  ></fixed-tab-bar>\n  \n  <!-- Match Tab Content Container -->\n  <view \n    class=\"match-tab-content-container\"\n    bindtouchstart=\"onTouchStart\"\n    bindtouchmove=\"onTouchMove\"\n    bindtouchend=\"onTouchEnd\"\n  >\n    \n    <!-- Tab Content Component for Matches -->\n    <tab-content \n      activeTab=\"{{activeMatchTab}}\"\n      loading=\"{{matchLoading}}\"\n      error=\"{{matchError}}\"\n      enableLazyLoad=\"{{true}}\"\n      enableCache=\"{{true}}\"\n      bindtabcontentchange=\"onMatchTabContentChange\"\n      bindlazyload=\"onMatchTabLazyLoad\"\n      bindretry=\"onMatchTabRetry\"\n    >\n      \n      <!-- All Matches Tab Content -->\n      <view slot=\"all-matches\">\n        <view class=\"all-matches-content\">\n          \n          <!-- Match Filter Bar -->\n          <view class=\"match-filter-bar\">\n            <view class=\"filter-chips\">\n              <view \n                class=\"filter-chip {{matchFilters.status === '' ? 'active' : ''}}\"\n                bindtap=\"filterMatches\"\n                data-type=\"status\"\n                data-value=\"\"\n              >\n                å…¨éƒ¨\n              </view>\n              <view \n                class=\"filter-chip {{matchFilters.status === 'upcoming' ? 'active' : ''}}\"\n                bindtap=\"filterMatches\"\n                data-type=\"status\"\n                data-value=\"upcoming\"\n              >\n                å³å°†å¼€å§‹\n              </view>\n              <view \n                class=\"filter-chip {{matchFilters.status === 'live' ? 'active' : ''}}\"\n                bindtap=\"filterMatches\"\n                data-type=\"status\"\n                data-value=\"live\"\n              >\n                è¿›è¡Œä¸­\n              </view>\n              <view \n                class=\"filter-chip {{matchFilters.status === 'completed' ? 'active' : ''}}\"\n                bindtap=\"filterMatches\"\n                data-type=\"status\"\n                data-value=\"completed\"\n              >\n                å·²ç»“æŸ\n              </view>\n            </view>\n          </view>\n          \n          <!-- Match List -->\n          <view wx:if=\"{{matchTabData.allMatches.matches.length > 0}}\" class=\"match-list\">\n            <view \n              wx:for=\"{{matchTabData.allMatches.matches}}\" \n              wx:key=\"id\" \n              class=\"match-card {{item.status}}\"\n              bindtap=\"goToMatchDetail\"\n              data-id=\"{{item._id}}\"\n            >\n              <!-- Match Status Badge -->\n              <view class=\"match-status-badge status-{{item.status}}\">\n                <text class=\"status-dot\"></text>\n                <text class=\"status-text\">\n                  {{item.status === 'upcoming' ? 'å³å°†å¼€å§‹' : \n                    item.status === 'live' ? 'è¿›è¡Œä¸­' :\n                    item.status === 'completed' ? 'å·²ç»“æŸ' : 'å·²å–æ¶ˆ'}}\n                </text>\n              </view>\n              \n              <!-- Match Header -->\n              <view class=\"match-header\">\n                <view class=\"match-title\">{{item.matchName}}</view>\n                <view class=\"match-time\">\n                  {{item.status === 'live' ? 'è¿›è¡Œä¸­' : item.startTime}}\n                </view>\n              </view>\n              \n              <!-- Match Players/Teams -->\n              <view class=\"match-players\">\n                <view class=\"player-section\">\n                  <view class=\"player-info\">\n                    <image \n                      class=\"player-avatar\" \n                      src=\"{{item.participants[0].player.avatar || '/images/default-avatar.svg'}}\"\n                      mode=\"aspectFill\"\n                    ></image>\n                    <view class=\"player-details\">\n                      <view class=\"player-name\">{{item.participants[0].player.nickname}}</view>\n                      <view class=\"player-rank\">æ’å: {{item.participants[0].player.ranking || 'N/A'}}</view>\n                    </view>\n                  </view>\n                  \n                  <!-- Score Display -->\n                  <view class=\"score-display\">\n                    <view class=\"score-number {{item.participants[0].isWinner ? 'winner' : ''}}\">\n                      {{item.participants[0].score || '0'}}\n                    </view>\n                  </view>\n                </view>\n                \n                <!-- VS Divider -->\n                <view class=\"vs-divider\">\n                  <text class=\"vs-text\">VS</text>\n                </view>\n                \n                <view class=\"player-section\">\n                  <view class=\"score-display\">\n                    <view class=\"score-number {{item.participants[1].isWinner ? 'winner' : ''}}\">\n                      {{item.participants[1].score || '0'}}\n                    </view>\n                  </view>\n                  \n                  <view class=\"player-info reverse\">\n                    <view class=\"player-details\">\n                      <view class=\"player-name\">{{item.participants[1].player.nickname}}</view>\n                      <view class=\"player-rank\">æ’å: {{item.participants[1].player.ranking || 'N/A'}}</view>\n                    </view>\n                    <image \n                      class=\"player-avatar\" \n                      src=\"{{item.participants[1].player.avatar || '/images/default-avatar.svg'}}\"\n                      mode=\"aspectFill\"\n                    ></image>\n                  </view>\n                </view>\n              </view>\n              \n              <!-- Match Info Footer -->\n              <view class=\"match-footer\">\n                <view class=\"match-venue\">\n                  <text class=\"venue-icon\">ğŸ“</text>\n                  <text class=\"venue-text\">{{item.venue}}</text>\n                </view>\n                <view class=\"match-type\">\n                  <text class=\"type-icon\">ğŸ¾</text>\n                  <text class=\"type-text\">{{item.matchType}}</text>\n                </view>\n                <view wx:if=\"{{item.spectators.length > 0}}\" class=\"spectator-count\">\n                  <text class=\"spectator-icon\">ğŸ‘¥</text>\n                  <text class=\"spectator-text\">{{item.spectators.length}} è§‚ä¼—</text>\n                </view>\n              </view>\n            </view>\n          </view>\n          \n          <!-- Empty State -->\n          <view wx:else class=\"empty-matches\">\n            <image class=\"empty-icon\" src=\"/images/tennis-ball.svg\" mode=\"aspectFit\"></image>\n            <view class=\"empty-text\">æš‚æ— æ¯”èµ›</view>\n            <button class=\"create-match-btn\" bindtap=\"goToCreateMatch\">\n              åˆ›å»ºæ¯”èµ›\n            </button>\n          </view>\n          \n          <!-- Load More -->\n          <view wx:if=\"{{matchTabData.allMatches.hasMore && !matchLoading}}\" \n                class=\"load-more-matches\" \n                bindtap=\"loadMoreMatches\">\n            åŠ è½½æ›´å¤šæ¯”èµ›\n          </view>\n        </view>\n      </view>\n      \n      <!-- Live Matches Tab Content -->\n      <view slot=\"live-matches\">\n        <view class=\"live-matches-content\">\n          \n          <!-- Live Matches Header -->\n          <view class=\"live-header\">\n            <view class=\"live-indicator\">\n              <view class=\"live-dot\"></view>\n              <text class=\"live-text\">æ­£åœ¨ç›´æ’­</text>\n            </view>\n            <view class=\"refresh-btn\" bindtap=\"refreshLiveMatches\">\n              <text class=\"refresh-icon\">ğŸ”„</text>\n              <text class=\"refresh-text\">åˆ·æ–°</text>\n            </view>\n          </view>\n          \n          <!-- Live Match Cards -->\n          <view wx:if=\"{{matchTabData.liveMatches.matches.length > 0}}\" class=\"live-match-list\">\n            <view \n              wx:for=\"{{matchTabData.liveMatches.matches}}\" \n              wx:key=\"id\" \n              class=\"live-match-card\"\n              bindtap=\"goToLiveMatch\"\n              data-id=\"{{item._id}}\"\n            >\n              <!-- Live Badge -->\n              <view class=\"live-badge\">\n                <view class=\"live-pulse\"></view>\n                <text class=\"live-label\">LIVE</text>\n              </view>\n              \n              <!-- Live Score Display -->\n              <view class=\"live-score-container\">\n                <view class=\"live-player\">\n                  <image \n                    class=\"live-avatar\" \n                    src=\"{{item.participants[0].player.avatar || '/images/default-avatar.svg'}}\"\n                    mode=\"aspectFill\"\n                  ></image>\n                  <view class=\"live-player-name\">{{item.participants[0].player.nickname}}</view>\n                </view>\n                \n                <view class=\"live-score-center\">\n                  <view class=\"live-scores\">\n                    <text class=\"live-score-number\">{{item.participants[0].currentScore}}</text>\n                    <text class=\"live-score-separator\">:</text>\n                    <text class=\"live-score-number\">{{item.participants[1].currentScore}}</text>\n                  </view>\n                  <view class=\"live-set-scores\">\n                    <text class=\"set-score\">{{item.participants[0].setScores.join(' ')}}</text>\n                    <text class=\"set-separator\">-</text>\n                    <text class=\"set-score\">{{item.participants[1].setScores.join(' ')}}</text>\n                  </view>\n                  <view class=\"live-match-time\">{{item.elapsedTime}}</view>\n                </view>\n                \n                <view class=\"live-player\">\n                  <image \n                    class=\"live-avatar\" \n                    src=\"{{item.participants[1].player.avatar || '/images/default-avatar.svg'}}\"\n                    mode=\"aspectFill\"\n                  ></image>\n                  <view class=\"live-player-name\">{{item.participants[1].player.nickname}}</view>\n                </view>\n              </view>\n              \n              <!-- Live Match Info -->\n              <view class=\"live-match-info\">\n                <view class=\"live-venue\">ğŸ“ {{item.venue}}</view>\n                <view class=\"live-viewers\">ğŸ‘ï¸ {{item.liveViewers || 0}} è§‚çœ‹</view>\n              </view>\n            </view>\n          </view>\n          \n          <!-- No Live Matches -->\n          <view wx:else class=\"no-live-matches\">\n            <image class=\"no-live-icon\" src=\"/images/court-bg.svg\" mode=\"aspectFit\"></image>\n            <view class=\"no-live-text\">å½“å‰æ²¡æœ‰æ­£åœ¨è¿›è¡Œçš„æ¯”èµ›</view>\n            <view class=\"no-live-subtitle\">æ¯”èµ›å¼€å§‹æ—¶ä¼šåœ¨è¿™é‡Œæ˜¾ç¤º</view>\n          </view>\n        </view>\n      </view>\n      \n      <!-- My Matches Tab Content -->\n      <view slot=\"my-matches\">\n        <view class=\"my-matches-content\">\n          \n          <!-- My Matches Filter -->\n          <view class=\"my-matches-filter\">\n            <view class=\"filter-tabs\">\n              <view \n                class=\"filter-tab {{matchTabData.myMatches.type === 'all' ? 'active' : ''}}\"\n                bindtap=\"switchMyMatchType\"\n                data-type=\"all\"\n              >\n                å…¨éƒ¨\n              </view>\n              <view \n                class=\"filter-tab {{matchTabData.myMatches.type === 'playing' ? 'active' : ''}}\"\n                bindtap=\"switchMyMatchType\"\n                data-type=\"playing\"\n              >\n                æˆ‘å‚ä¸çš„\n              </view>\n              <view \n                class=\"filter-tab {{matchTabData.myMatches.type === 'watching' ? 'active' : ''}}\"\n                bindtap=\"switchMyMatchType\"\n                data-type=\"watching\"\n              >\n                æˆ‘å…³æ³¨çš„\n              </view>\n            </view>\n          </view>\n          \n          <!-- My Match List -->\n          <view wx:if=\"{{matchTabData.myMatches.matches.length > 0}}\" class=\"my-match-list\">\n            <view \n              wx:for=\"{{matchTabData.myMatches.matches}}\" \n              wx:key=\"id\" \n              class=\"my-match-card {{item.userRole}}\"\n              bindtap=\"goToMatchDetail\"\n              data-id=\"{{item._id}}\"\n            >\n              <!-- User Role Badge -->\n              <view class=\"role-badge {{item.userRole}}\">\n                {{item.userRole === 'player' ? 'å‚èµ›è€…' : 'è§‚ä¼—'}}\n              </view>\n              \n              <!-- Match Quick Info -->\n              <view class=\"my-match-header\">\n                <view class=\"my-match-title\">{{item.matchName}}</view>\n                <view class=\"my-match-status status-{{item.status}}\">\n                  {{item.status === 'upcoming' ? 'å³å°†å¼€å§‹' : \n                    item.status === 'live' ? 'è¿›è¡Œä¸­' :\n                    item.status === 'completed' ? 'å·²ç»“æŸ' : 'å·²å–æ¶ˆ'}}\n                </view>\n              </view>\n              \n              <!-- Match Result (if completed) -->\n              <view wx:if=\"{{item.status === 'completed'}}\" class=\"my-match-result\">\n                <view class=\"result-text\">\n                  {{item.userResult === 'win' ? 'ğŸ† èƒœåˆ©' : \n                    item.userResult === 'lose' ? 'ğŸ˜” å¤±è´¥' : 'ğŸ“Š è§‚çœ‹'}}\n                </view>\n                <view class=\"final-score\">{{item.finalScore}}</view>\n              </view>\n              \n              <!-- Quick Actions -->\n              <view class=\"my-match-actions\">\n                <button wx:if=\"{{item.status === 'upcoming' && item.userRole === 'player'}}\" \n                        class=\"action-btn prepare\" \n                        catchtap=\"prepareForMatch\" \n                        data-id=\"{{item._id}}\">\n                  å‡†å¤‡æ¯”èµ›\n                </button>\n                <button wx:if=\"{{item.status === 'live'}}\" \n                        class=\"action-btn watch\" \n                        catchtap=\"watchLiveMatch\" \n                        data-id=\"{{item._id}}\">\n                  è§‚çœ‹ç›´æ’­\n                </button>\n                <button class=\"action-btn share\" \n                        catchtap=\"shareMatch\" \n                        data-id=\"{{item._id}}\">\n                  åˆ†äº«\n                </button>\n              </view>\n            </view>\n          </view>\n          \n          <!-- Empty My Matches -->\n          <view wx:else class=\"empty-my-matches\">\n            <image class=\"empty-my-icon\" src=\"/images/trophy.svg\" mode=\"aspectFit\"></image>\n            <view class=\"empty-my-text\">\n              {{matchTabData.myMatches.type === 'playing' ? 'æ‚¨è¿˜æ²¡æœ‰å‚ä¸ä»»ä½•æ¯”èµ›' : \n                matchTabData.myMatches.type === 'watching' ? 'æ‚¨è¿˜æ²¡æœ‰å…³æ³¨ä»»ä½•æ¯”èµ›' : 'æ‚¨è¿˜æ²¡æœ‰ç›¸å…³æ¯”èµ›'}}\n            </view>\n            <button wx:if=\"{{matchTabData.myMatches.type === 'playing'}}\" \n                    class=\"join-match-btn\" \n                    bindtap=\"findMatchesToJoin\">\n              å¯»æ‰¾æ¯”èµ›\n            </button>\n          </view>\n        </view>\n      </view>\n      \n      <!-- Tournament Bracket Tab Content -->\n      <view slot=\"tournament-bracket\">\n        <view class=\"tournament-content\">\n          \n          <!-- Tournament Selector -->\n          <view class=\"tournament-selector\">\n            <picker \n              bindchange=\"onTournamentChange\" \n              value=\"{{selectedTournamentIndex}}\" \n              range=\"{{tournaments}}\" \n              range-key=\"name\"\n            >\n              <view class=\"tournament-picker\">\n                <text class=\"tournament-name\">\n                  {{tournaments[selectedTournamentIndex].name || 'é€‰æ‹©é”¦æ ‡èµ›'}}\n                </text>\n                <text class=\"picker-arrow\">â–¼</text>\n              </view>\n            </picker>\n          </view>\n          \n          <!-- Tournament Bracket Display -->\n          <view wx:if=\"{{selectedTournament}}\" class=\"bracket-container\">\n            \n            <!-- Bracket Header -->\n            <view class=\"bracket-header\">\n              <view class=\"tournament-info\">\n                <view class=\"tournament-title\">{{selectedTournament.name}}</view>\n                <view class=\"tournament-stage\">{{selectedTournament.currentStage}}</view>\n              </view>\n              <view class=\"tournament-progress\">\n                <view class=\"progress-bar\">\n                  <view class=\"progress-fill\" style=\"width: {{selectedTournament.progress}}%\"></view>\n                </view>\n                <view class=\"progress-text\">{{selectedTournament.progress}}% å®Œæˆ</view>\n              </view>\n            </view>\n            \n            <!-- Bracket Rounds -->\n            <scroll-view class=\"bracket-scroll\" scroll-x=\"true\">\n              <view class=\"bracket-rounds\">\n                <view \n                  wx:for=\"{{selectedTournament.rounds}}\" \n                  wx:key=\"roundNumber\" \n                  class=\"bracket-round\"\n                >\n                  <view class=\"round-header\">\n                    <text class=\"round-title\">{{item.name}}</text>\n                    <text class=\"round-date\">{{item.date}}</text>\n                  </view>\n                  \n                  <view class=\"round-matches\">\n                    <view \n                      wx:for=\"{{item.matches}}\" \n                      wx:key=\"id\" \n                      class=\"bracket-match {{item.status}}\"\n                      bindtap=\"goToMatchDetail\"\n                      data-id=\"{{item._id}}\"\n                    >\n                      <view class=\"bracket-player {{item.participants[0].isWinner ? 'winner' : ''}}\">\n                        <view class=\"bracket-player-name\">{{item.participants[0].player.nickname}}</view>\n                        <view class=\"bracket-score\">{{item.participants[0].score || '-'}}</view>\n                      </view>\n                      \n                      <view class=\"bracket-vs\">VS</view>\n                      \n                      <view class=\"bracket-player {{item.participants[1].isWinner ? 'winner' : ''}}\">\n                        <view class=\"bracket-player-name\">{{item.participants[1].player.nickname}}</view>\n                        <view class=\"bracket-score\">{{item.participants[1].score || '-'}}</view>\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </scroll-view>\n          </view>\n          \n          <!-- No Tournament Selected -->\n          <view wx:else class=\"no-tournament\">\n            <image class=\"no-tournament-icon\" src=\"/images/trophy.svg\" mode=\"aspectFit\"></image>\n            <view class=\"no-tournament-text\">è¯·é€‰æ‹©ä¸€ä¸ªé”¦æ ‡èµ›æŸ¥çœ‹å¯¹é˜µè¡¨</view>\n          </view>\n        </view>\n      </view>\n      \n      <!-- Statistics Tab Content -->\n      <view slot=\"statistics\">\n        <view class=\"statistics-content\">\n          \n          <!-- Stats Overview Cards -->\n          <view class=\"stats-overview\">\n            <view class=\"stats-card\">\n              <view class=\"stats-icon\">ğŸ¾</view>\n              <view class=\"stats-number\">{{matchStats.totalMatches || 0}}</view>\n              <view class=\"stats-label\">æ€»æ¯”èµ›æ•°</view>\n            </view>\n            \n            <view class=\"stats-card\">\n              <view class=\"stats-icon\">ğŸ†</view>\n              <view class=\"stats-number\">{{matchStats.wins || 0}}</view>\n              <view class=\"stats-label\">èƒœåˆ©åœºæ¬¡</view>\n            </view>\n            \n            <view class=\"stats-card\">\n              <view class=\"stats-icon\">ğŸ“Š</view>\n              <view class=\"stats-number\">{{matchStats.winRate || 0}}%</view>\n              <view class=\"stats-label\">èƒœç‡</view>\n            </view>\n            \n            <view class=\"stats-card\">\n              <view class=\"stats-icon\">â­</view>\n              <view class=\"stats-number\">{{matchStats.ranking || 'N/A'}}</view>\n              <view class=\"stats-label\">æ’å</view>\n            </view>\n          </view>\n          \n          <!-- Recent Performance Chart -->\n          <view class=\"performance-chart\">\n            <view class=\"chart-header\">\n              <text class=\"chart-title\">æœ€è¿‘è¡¨ç°</text>\n              <view class=\"chart-period\">\n                <text class=\"period-btn {{statsPeriod === '7d' ? 'active' : ''}}\" \n                      bindtap=\"changeStatsPeriod\" \n                      data-period=\"7d\">7å¤©</text>\n                <text class=\"period-btn {{statsPeriod === '30d' ? 'active' : ''}}\" \n                      bindtap=\"changeStatsPeriod\" \n                      data-period=\"30d\">30å¤©</text>\n                <text class=\"period-btn {{statsPeriod === '90d' ? 'active' : ''}}\" \n                      bindtap=\"changeStatsPeriod\" \n                      data-period=\"90d\">90å¤©</text>\n              </view>\n            </view>\n            \n            <!-- Simple Performance Bars -->\n            <view class=\"performance-bars\">\n              <view \n                wx:for=\"{{performanceData}}\" \n                wx:key=\"date\" \n                class=\"performance-bar\"\n              >\n                <view class=\"bar-container\">\n                  <view class=\"bar-fill win\" style=\"height: {{item.winPercentage}}%\"></view>\n                  <view class=\"bar-fill lose\" style=\"height: {{item.losePercentage}}%\"></view>\n                </view>\n                <view class=\"bar-label\">{{item.date}}</view>\n              </view>\n            </view>\n            \n            <view class=\"chart-legend\">\n              <view class=\"legend-item\">\n                <view class=\"legend-color win\"></view>\n                <text class=\"legend-text\">èƒœåˆ©</text>\n              </view>\n              <view class=\"legend-item\">\n                <view class=\"legend-color lose\"></view>\n                <text class=\"legend-text\">å¤±è´¥</text>\n              </view>\n            </view>\n          </view>\n          \n          <!-- Match History Summary -->\n          <view class=\"match-history-summary\">\n            <view class=\"summary-header\">\n              <text class=\"summary-title\">æ¯”èµ›å†å²</text>\n              <text class=\"view-all\" bindtap=\"viewAllHistory\">æŸ¥çœ‹å…¨éƒ¨</text>\n            </view>\n            \n            <view class=\"recent-matches\">\n              <view \n                wx:for=\"{{recentMatches}}\" \n                wx:key=\"id\" \n                class=\"recent-match-item\"\n                bindtap=\"goToMatchDetail\"\n                data-id=\"{{item._id}}\"\n              >\n                <view class=\"recent-match-result {{item.userResult}}\">\n                  {{item.userResult === 'win' ? 'W' : item.userResult === 'lose' ? 'L' : 'D'}}\n                </view>\n                <view class=\"recent-match-info\">\n                  <view class=\"recent-opponent\">vs {{item.opponentName}}</view>\n                  <view class=\"recent-date\">{{item.date}}</view>\n                </view>\n                <view class=\"recent-score\">{{item.score}}</view>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      \n    </tab-content>\n    \n  </view> <!-- End of match-tab-content-container -->\n</view>"