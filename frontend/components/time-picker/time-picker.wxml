<!-- time-picker.wxml - æ—¶é—´é€‰æ‹©å™¨ç»„ä»¶ -->
<view class="time-picker-container">
  <!-- é®ç½©å±‚ -->
  <view 
    wx:if="{{visible}}" 
    class="picker-mask" 
    bindtap="onMaskTap"
    catchtouchmove="preventTouchMove"
  ></view>

  <!-- é€‰æ‹©å™¨é¢æ¿ -->
  <view class="picker-panel {{visible ? 'show' : ''}}">
    <!-- å¤´éƒ¨ -->
    <view class="picker-header">
      <text class="cancel-btn" bindtap="onCancel">å–æ¶ˆ</text>
      <text class="title">é€‰æ‹©æ—¶é—´</text>
      <text class="confirm-btn" bindtap="onConfirm">ç¡®å®š</text>
    </view>

    <!-- å¿«é€Ÿé€‰æ‹© -->
    <view class="quick-select-section">
      <text class="section-title">å¿«é€Ÿé€‰æ‹©</text>
      <view class="quick-options">
        <view 
          wx:for="{{quickOptions}}" 
          wx:key="id"
          class="quick-option {{selectedQuick === item.id ? 'active' : ''}}"
          bindtap="onQuickSelect"
          data-option="{{item}}"
        >
          <text class="option-text">{{item.name}}</text>
        </view>
      </view>
    </view>

    <!-- è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´ -->
    <view class="custom-date-section">
      <text class="section-title">è‡ªå®šä¹‰æ—¥æœŸ</text>
      
      <!-- å¼€å§‹æ—¥æœŸ -->
      <view class="date-row">
        <text class="date-label">å¼€å§‹æ—¥æœŸ</text>
        <picker 
          mode="date" 
          value="{{startDate}}" 
          start="{{minDate}}"
          end="{{maxDate}}"
          bindchange="onStartDateChange"
        >
          <view class="date-picker">
            <text class="date-text">{{formatDisplayDate(startDate)}}</text>
            <text class="picker-arrow">ğŸ“…</text>
          </view>
        </picker>
      </view>

      <!-- ç»“æŸæ—¥æœŸ -->
      <view class="date-row">
        <text class="date-label">ç»“æŸæ—¥æœŸ</text>
        <picker 
          mode="date" 
          value="{{endDate}}" 
          start="{{startDate || minDate}}"
          end="{{maxDate}}"
          bindchange="onEndDateChange"
        >
          <view class="date-picker">
            <text class="date-text">{{formatDisplayDate(endDate)}}</text>
            <text class="picker-arrow">ğŸ“…</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- æ—¶é—´æ®µé€‰æ‹© -->
    <view wx:if="{{showTimeRange}}" class="time-range-section">
      <text class="section-title">æ—¶é—´æ®µ</text>
      <view class="time-range-options">
        <view 
          wx:for="{{timeRanges}}" 
          wx:key="id"
          class="time-range-option {{selectedTimeRange === item.id ? 'active' : ''}}"
          bindtap="onTimeRangeSelect"
          data-range="{{item}}"
        >
          <text class="range-text">{{item.name}}</text>
          <text class="range-time">{{item.time}}</text>
        </view>
      </view>
    </view>

    <!-- æ•°å­—æ—¶é—´è¡¨è¾¾ -->
    <view wx:if="{{showDigitalTime}}" class="digital-time-section">
      <text class="section-title">æ•°å­—æ—¶é—´</text>
      <view class="digital-inputs">
        <view class="input-group">
          <text class="input-label">å¤©æ•°</text>
          <input 
            class="digital-input"
            type="number"
            placeholder="0"
            value="{{digitalTime.days}}"
            bindinput="onDigitalDaysInput"
          />
          <text class="input-unit">å¤©</text>
        </view>
        <view class="input-group">
          <text class="input-label">å°æ—¶</text>
          <input 
            class="digital-input"
            type="number"
            placeholder="0"
            value="{{digitalTime.hours}}"
            bindinput="onDigitalHoursInput"
          />
          <text class="input-unit">å°æ—¶</text>
        </view>
      </view>
      <view class="digital-preview">
        <text class="preview-text">{{getDigitalPreview()}}</text>
      </view>
    </view>

    <!-- é¢„è®¾æ—¶é—´èŒƒå›´ -->
    <view class="preset-section">
      <text class="section-title">å¸¸ç”¨èŒƒå›´</text>
      <view class="preset-grid">
        <view 
          wx:for="{{presetRanges}}" 
          wx:key="id"
          class="preset-item {{selectedPreset === item.id ? 'active' : ''}}"
          bindtap="onPresetSelect"
          data-preset="{{item}}"
        >
          <text class="preset-name">{{item.name}}</text>
          <text class="preset-desc">{{item.description}}</text>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨æ“ä½œåŒº -->
    <view class="picker-footer">
      <view class="selected-info">
        <text class="info-text">{{getSelectedInfo()}}</text>
      </view>
      <view class="footer-buttons">
        <button class="reset-btn" bindtap="onReset">é‡ç½®</button>
        <button class="apply-btn" bindtap="onConfirm">åº”ç”¨</button>
      </view>
    </view>
  </view>
</view>
